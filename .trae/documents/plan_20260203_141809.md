# Rencana Integrasi Fitur "Generate Nomer Surat" ke "IG to Web"

Saya telah menganalisis repository `Generate-Nomer-Surat` dan struktur projek `ig-to-web`. Berikut adalah rencana komprehensif untuk menggabungkan kedua sistem ini tanpa merusak fitur yang sudah ada.

## 1. Database & Migrasi
Kita perlu membuat tabel-tabel baru untuk menyimpan data surat tanpa mengganggu tabel `users` yang sudah ada.
*   **Action**: Buat file migrasi baru `2026_02_03_000000_create_surat_tables.php` yang mencakup:
    *   `letter_formats`: Menyimpan format penomoran surat.
    *   `letter_format_segments`: Detail segmen penomoran.
    *   `letters`: Data surat masuk dan keluar.
    *   `letter_counters`: Penghitung nomor surat otomatis.
    *   `letter_activity_logs`: Log aktivitas surat.
    *   Menambahkan kolom `unit_code` ke tabel `users` (jika belum ada) untuk mendukung kode unit kerja.

## 2. Backend (Models & Controllers)
Kita akan menyalin dan menyesuaikan logika bisnis dari repository sumber agar sesuai dengan standar `ig-to-web`.
*   **Models**: Membuat model `Letter`, `LetterFormat`, `LetterFormatSegment`, `LetterCounter`, `LetterActivityLog` di `app/Models`.
*   **Controllers**: Membuat controller di `app/Http/Controllers` (mempertahankan nama asli agar konsisten dengan logika sumber, atau menyesuaikan namespace jika perlu):
    *   `LetterOutController`: Untuk manajemen Surat Keluar.
    *   `LetterInController`: Untuk manajemen Surat Masuk.
    *   `LetterFormatController`: Untuk pengaturan format nomor surat.
    *   `LetterActivityLogController`: Untuk melihat riwayat aktivitas.

## 3. Frontend (Views & Resources)
Kita akan mengintegrasikan tampilan surat ke dalam tema dashboard `ig-to-web` yang sudah ada.
*   **Views**: Menyalin folder views dari sumber ke `resources/views/admin/letters`.
    *   Menyesuaikan layout agar menggunakan `@extends('layouts.app')` milik `ig-to-web` (bukan layout bawaan repo sumber).
    *   Memastikan styling menggunakan Tailwind CSS yang sudah terinstall.
*   **Menu**: Menambahkan sub-menu "E-Surat" ke dalam tombol **E-Services** di navigasi utama (`resources/views/layouts/navigation.blade.php`).

## 4. Permission & Security
Menambahkan hak akses baru agar fitur ini aman dan hanya bisa diakses oleh role yang ditentukan.
*   **Permissions**: Mengupdate `PermissionSeeder.php` untuk menambahkan:
    *   `surat.view`, `surat.create`, `surat.edit`, `surat.delete`
    *   `surat.settings` (untuk format nomor)
*   **Role Assignment**: Memberikan permission ini ke role:
    *   `Superadmin` & `Admin`: Akses penuh (termasuk pengaturan format).
    *   `Guru` & `Sarpras`: Akses membuat/melihat surat (sesuai request Anda).
*   **Routes**: Mendaftarkan route baru di `routes/web.php` dengan middleware `auth` dan pengecekan permission yang sesuai.

## Langkah Eksekusi
1.  Buat migrasi database dan jalankan `migrate`.
2.  Salin dan sesuaikan Models & Controllers.
3.  Salin dan sesuaikan Views.
4.  Update `PermissionSeeder` dan jalankan seeder.
5.  Tambahkan Route dan Menu Navigasi.

Apakah Anda setuju dengan rencana integrasi ini?